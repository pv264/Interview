# 1. What are the best practices that we should consider while writing a Docker file?
# Docker Production Best Practices

In production, we strictly follow Docker best practices to ensure security, efficiency, and maintainability:

1.  **Base Images:**
    * Use **minimal** base images (e.g., Alpine, Distroless) to reduce attack surface.
    * Use **pinned versions** (e.g., `node:18.16.0-alpine` instead of `node:latest`) for deterministic builds.

2.  **Image Optimization:**
    * Implement **Multi-stage builds** to discard build dependencies and drastically reduce the final image size.
    * **Minimize layers** by combining commands (e.g., `RUN apt-get update && apt-get install...`).
    * Leverage the **Docker build cache** properly by ordering instructions from least to most frequently changed.

3.  **Security:**
    * **Avoid Root User:** Create and switch to a non-root user (`USER appuser`) inside the Dockerfile.
    * **Secrets Management:** Ensure secrets and credentials are **never baked** into the image; inject them at runtime via environment variables or secret managers.
    * **Vulnerability Scanning:** Scan images for CVEs using tools like **Trivy** or **Clair** before deploying to the registry.

4.  **Context Management:**
    * Use `.dockerignore` to exclude unnecessary files (like `.git`, `node_modules`, `local-secrets`) from the build context.
